<!--pages/index/index.wxml-->
<view class="container page-container">
  <!-- 用户信息卡片 -->
  <view class="hero-section" wx:if="{{userInfo}}">
    <view class="user-card">
      <view class="card-body">
        <view class="user-header">
          <view class="user-avatar-wrapper">
            <image class="avatar avatar-large" src="{{userInfo.avatar_url}}" mode="aspectFill"></image>
            <view class="avatar-ring"></view>
          </view>
          <view class="user-info">
            <view class="greeting">早上好 👋</view>
            <view class="username">{{userInfo.nickname}}</view>
            <view class="user-status">准备好了开始今天的阅读之旅吗？</view>
          </view>
          <view class="user-actions">
            <view class="action-btn" bindtap="goToProfile">
              <text class="action-icon">👤</text>
            </view>
          </view>
        </view>

        <!-- 今日阅读统计 -->
        <view class="reading-stats">
          <view class="stat-item">
            <view class="stat-number">7</view>
            <view class="stat-label">连续天数</view>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <view class="stat-number">23</view>
            <view class="stat-label">已读书籍</view>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <view class="stat-number">156</view>
            <view class="stat-label">阅读时长</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 未登录提示 -->
  <view class="hero-section" wx:if="{{!userInfo}}">
    <view class="welcome-card">
      <view class="card-body text-center">
        <view class="welcome-icon">📚</view>
        <view class="welcome-title">开启阅读之旅</view>
        <view class="welcome-subtitle">加入恰恰读书会，发现更好的自己</view>
        <button class="btn btn-primary btn-welcome" bindtap="goToLogin">
          <text>立即开始</text>
          <text class="btn-arrow">→</text>
        </button>
      </view>
    </view>
  </view>

  <!-- 快速操作区 -->
  <view class="quick-actions" wx:if="{{userInfo}}">
    <view class="section-header">
      <view class="section-title">快速操作</view>
    </view>
    <view class="action-grid">
      <view class="action-card primary-action" bindtap="goToMyActivities">
        <view class="action-bg"></view>
        <view class="action-content">
          <view class="action-icon">🎯</view>
          <view class="action-title">我的活动</view>
          <view class="action-desc">管理我的活动</view>
        </view>
      </view>
      <view class="action-card secondary-action" bindtap="goToPosts">
        <view class="action-bg"></view>
        <view class="action-content">
          <view class="action-icon">💬</view>
          <view class="action-title">自由交流</view>
          <view class="action-desc">查看交流内容</view>
        </view>
      </view>
      <view class="action-card warning-action" bindtap="goToMessages">
        <view class="action-bg"></view>
        <view class="action-content">
          <view class="action-icon">📬</view>
          <view class="action-title">消息动态</view>
          <view class="action-desc">查看通知提醒</view>
          <view class="message-badge" wx:if="{{unreadCount > 0}}">{{unreadCount}}</view>
        </view>
      </view>
      <view class="action-card success-action" bindtap="goToStats">
        <view class="action-bg"></view>
        <view class="action-content">
          <view class="action-icon">📊</view>
          <view class="action-title">数据统计</view>
          <view class="action-desc">阅读进度</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 内容区域 -->
  <view class="content-section" wx:if="{{userInfo}}">
    <!-- 欢迎引导 -->
    <view class="welcome-guide">
      <view class="guide-header">
        <text class="guide-icon">📚</text>
        <text class="guide-title">开启阅读之旅</text>
      </view>
      <view class="guide-content">
        <text class="guide-desc">点击下方按钮开始探索精彩的阅读世界</text>
      </view>
      <view class="guide-actions">
        <view class="guide-action" bindtap="goToEvents">
          <text class="action-icon">🎯</text>
          <text class="action-text">浏览活动</text>
        </view>
        <view class="guide-action" bindtap="goToPosts">
          <text class="action-icon">💬</text>
          <text class="action-text">参与交流</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">精彩内容加载中...</text>
  </view>

  <!-- 自定义TabBar -->
  <custom-tabbar current="{{0}}"></custom-tabbar>
</view>