<!--pages/profile/profile.wxml-->
<view class="container page-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="card user-profile-card" wx:if="{{userInfo}}">
    <view class="card-body">
      <view class="profile-header">
        <image class="avatar avatar-large" src="{{userInfo.avatar_url}}" mode="aspectFill" bindtap="changeAvatar"></image>
        <view class="profile-info">
          <view class="nickname text-large">{{userInfo.nickname}}</view>
          <view class="phone text-small text-secondary" wx:if="{{userInfo.phone}}">ğŸ“± {{userInfo.phone}}</view>
          <view class="join-date text-small text-hint">åŠ å…¥æ—¶é—´ï¼š{{userInfo.created_at}}</view>
        </view>
        <view class="profile-actions">
          <view class="btn btn-outline btn-small" bindtap="editProfile">ç¼–è¾‘èµ„æ–™</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="stats-grid" wx:if="{{userInfo}}">
    <view class="stat-item" bindtap="goToMyEvents">
      <view class="stat-number">{{stats.events_count || 0}}</view>
      <view class="stat-label">å‚ä¸æ´»åŠ¨</view>
    </view>
    <view class="stat-item" bindtap="goToMyPosts">
      <view class="stat-number">{{stats.posts_count || 0}}</view>
      <view class="stat-label">å‘å¸ƒåŠ¨æ€</view>
    </view>
    <view class="stat-item" bindtap="goToMyLikes">
      <view class="stat-number">{{stats.likes_count || 0}}</view>
      <view class="stat-label">è·èµ</view>
    </view>
    <view class="stat-item" bindtap="goToMyFlowers">
      <view class="stat-number">{{stats.flowers_count || 0}}</view>
      <view class="stat-label">å°çº¢èŠ±</view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-group">
      <view class="menu-item" bindtap="goToMyEvents">
        <view class="menu-icon">ğŸ“š</view>
        <view class="menu-content">
          <view class="menu-title">æˆ‘çš„æ´»åŠ¨</view>
          <view class="menu-desc">æŸ¥çœ‹å‚ä¸å’Œåˆ›å»ºçš„æ´»åŠ¨</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
      <view class="menu-item" bindtap="goToMyPosts">
        <view class="menu-icon">âœï¸</view>
        <view class="menu-content">
          <view class="menu-title">æˆ‘çš„åŠ¨æ€</view>
          <view class="menu-desc">æŸ¥çœ‹å‘å¸ƒçš„æ‰“å¡åŠ¨æ€</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
      <view class="menu-item" bindtap="goToMyLikes">
        <view class="menu-icon">â¤ï¸</view>
        <view class="menu-content">
          <view class="menu-title">æˆ‘çš„ç‚¹èµ</view>
          <view class="menu-desc">æŸ¥çœ‹ç‚¹èµçš„å†…å®¹</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
    </view>

    <view class="menu-group">
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-icon">âš™ï¸</view>
        <view class="menu-content">
          <view class="menu-title">è®¾ç½®</view>
          <view class="menu-desc">è´¦å·è®¾ç½®ã€éšç§è®¾ç½®ç­‰</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
      <view class="menu-item" bindtap="goToHelp">
        <view class="menu-icon">â“</view>
        <view class="menu-content">
          <view class="menu-title">å¸®åŠ©ä¸åé¦ˆ</view>
          <view class="menu-desc">ä½¿ç”¨å¸®åŠ©ã€é—®é¢˜åé¦ˆ</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
      <view class="menu-item" bindtap="goToAbout">
        <view class="menu-icon">â„¹ï¸</view>
        <view class="menu-content">
          <view class="menu-title">å…³äºæˆ‘ä»¬</view>
          <view class="menu-desc">ç‰ˆæœ¬ä¿¡æ¯ã€è”ç³»æ–¹å¼</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
    </view>

    <view class="menu-group">
      <view class="menu-item logout-item" bindtap="logout">
        <view class="menu-icon">ğŸšª</view>
        <view class="menu-content">
          <view class="menu-title text-error">é€€å‡ºç™»å½•</view>
          <view class="menu-desc text-secondary">é€€å‡ºå½“å‰è´¦å·</view>
        </view>
        <view class="menu-arrow">></view>
      </view>
    </view>
  </view>

  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view class="login-prompt" wx:if="{{!userInfo}}">
    <view class="card">
      <view class="card-body text-center">
        <view class="empty-icon">ğŸ‘¤</view>
        <view class="empty-text">æœªç™»å½•</view>
        <view class="empty-desc">ç™»å½•åæŸ¥çœ‹ä¸ªäººä¿¡æ¯</view>
        <button class="btn btn-primary btn-block mt-4" bindtap="goToLogin">ç«‹å³ç™»å½•</button>
      </view>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text class="text-mini text-hint">QQè¯»ä¹¦ä¼š v1.0.0</text>
  </view>
</view>